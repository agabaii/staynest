# МИНИСТЕРСТВО ОБРАЗОВАНИЯ И НАУКИ
## ПОЯСНИТЕЛЬНАЯ ЗАПИСКА К КУРСОВОМУ ПРОЕКТУ
### По дисциплине: «Технологии разработки программного обеспечения»
**Тема: «Проектирование и разработка автоматизированной системы краткосрочной аренды недвижимости StayNest»**

---

## ВВЕДЕНИЕ
Развитие информационных технологий диктует необходимость автоматизации процессов в сфере услуг. Курсовой проект посвящен созданию программного комплекса StayNest, который решает задачу эффективного взаимодействия между арендодателями и арендаторами. Система включает в себя серверную часть, базу данных, мобильное приложение и панель управления для администратора.

---

## РАЗДЕЛ 1. АРХИТЕКТУРА И СТРУКТУРА ПРОДУКТА

### 1.1 Описание архитектуры (Клиент–Сервер)
Система спроектирована по классической схеме клиент-серверного взаимодействия:
*   **Backend:** Реализован на Node.js с использованием фреймворка Express. Это "мозг" системы, который обрабатывает логику и запросы.
*   **База данных:** Реляционная СУБД PostgreSQL, управляемая через Prisma ORM.
*   **Мобильное приложение (Flutter):** Основной интерфейс для пользователей.
*   **Web Frontend (Admin Panel):** Инструмент для администратора, написанный на Vanilla JS/HTML5.

---

## РАЗДЕЛ 2. СТРУКТУРА БАЗЫ ДАННЫХ (10 ТАБЛИЦ)

В базе данных PostgreSQL под управлением Prisma создано **10 таблиц**. Ниже приведено подробное описание каждой из них.

### 2.1 Таблица User (Пользователи)
*   **Назначение:** Регистрация и хранение профилей.
*   **Поля:** `id`, `email`, `name`, `password` (хэш), `role` (Role), `isBanned` (Boolean), `phone`.

### 2.2 Таблица Property (Объекты недвижимости)
*   **Назначение:** Основные данные о жилье.
*   **Поля:** `id`, `title`, `description`, `price` (Float), `images` (массив ссылок), `city`, `authorId` (FK).

### 2.3 Таблица Booking (Бронирования)
*   **Назначение:** Связывает арендатора и объект на определенные даты.
*   **Поля:** `startDate`, `endDate`, `totalPrice`, `status`, `renterId` (FK), `propertyId` (FK).

### 2.4 Таблица Message (Чат)
*   **Назначение:** Хранение истории переписки.
*   **Поля:** `content`, `senderId`, `receiverId`, `propertyId`, `createdAt`.

### 2.5 Таблица Notification (Уведомления)
*   **Назначение:** Системные оповещения для пользователей.
*   **Поля:** `content`, `type`, `isRead`, `userId` (FK).

### 2.6 Таблица PropertyCalendar (Календарь)
*   **Назначение:** Информация о доступности дат и кастомных ценах.
*   **Поля:** `propertyId`, `date`, `price`, `isBlocked`.

### 2.7 Таблица Favorite (Избранное)
*   **Назначение:** Связующая таблица для "лайков" пользователей.
*   **Поля:** `userId`, `propertyId`.

### 2.8 Таблица Review (Отзывы)
*   **Назначение:** Оценки и комментарии гостей.
*   **Поля:** `rating` (1-5), `comment`, `photos`, `userId`, `propertyId`.

### 2.9 Таблица Report (Жалобы)
*   **Назначение:** Модерация нарушений.
*   **Поля:** `reason`, `details`, `status` (PENDING/RESOLVED), `reporterId`, `propertyId`, `userId`.

### 2.10 Таблица _prisma_migrations (Системная)
*   **Назначение:** Служебная таблица для версионирования структуры БД.

---

## РАЗДЕЛ 3. ОПИСАНИЕ API

### 3.1 Принципы взаимодействия
Обмен данными происходит в формате **JSON**. Каждый запрос от клиента должен содержать заголовок `Authorization: Bearer <JWT>`.

### 3.2 Список основных методов
| Метод | URL | Назначение |
|-------|-----|------------|
| POST | `/api/auth/register` | Регистрация (библиотека bcrypt) |
| POST | `/api/auth/login` | Авторизация (библиотека jsonwebtoken) |
| GET | `/api/admin/users` | (Admin) Данные пользователей и их статистика |
| PUT | `/api/admin/users/:id` | (Admin) Редактирование профиля или роли |
| DELETE | `/api/admin/users/:id` | (Admin) Каскадное удаление данных пользователя |
| PUT | `/api/admin/properties/:id` | (Admin) Редактирование объявления |

---

## РАЗДЕЛ 4. ФУНКЦИОНАЛ ПРИЛОЖЕНИЯ И FRONTEND

### 4.1 Мобильное приложение
*   **Авторизация:** Безопасный вход.
*   **Поиск и фильтры:** Выборка из таблицы `Property`.
*   **Бронирование:** Создание записей в `Booking` и `PropertyCalendar`.
*   **Обработка ошибок:** Специальное прерывание сессии при ответе сервера 403 (Бан).

### 4.2 Frontend (Админ-панель)
*   **Revenue Chart:** Визуализация прибыли на основе таблицы `Booking`.
*   **User Management:** Полный CRUD цикл управления пользователями.
*   **Moderation:** Система принятия решений по жалобам (таблица `Report`).

---

## ЗАКЛЮЧЕНИЕ
Разработанная системаStayNest является комплексным программным решением, охватывающим все аспекты бизнеса по аренде недвижимости. Четкая структура базы данных из 10 таблиц обеспечивает высокую скорость работы и надежность хранения информации.
